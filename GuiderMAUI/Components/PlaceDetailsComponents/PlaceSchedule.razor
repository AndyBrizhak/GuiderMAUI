@namespace GuiderMAUI.Client.Components.PlaceDetailsComponents
@using GuiderMAUI.Shared.Models

@if (Schedule != null && Schedule.Any())
{
    <div class="schedule-section">
        <details class="schedule-details">
            <summary>
                <span>Working Hours</span>
                <span class="arrow-icon">▼</span>
            </summary>
            <div class="schedule-table">
                @foreach (var entry in Schedule)
                {
                    <div class="schedule-block">
                        <div class="schedule-days">
                            @FormatDays(entry.Days)
                        </div>
                        <div class="schedule-hours">
                            @if (entry.Hours != null && entry.Hours.Any())
                            {
                                @foreach (var hour in entry.Hours)
                                {
                                    <span>@hour.Start - @hour.End</span>
                                }
                            }
                            else
                            {
                                <span class="closed-text">Closed</span>
                            }
                        </div>
                    </div>
                }
            </div>
        </details>
    </div>
}

@code {
    [Parameter]
    public List<ScheduleEntry>? Schedule { get; set; }

    private string FormatDays(List<string> days)
    {
        if (days == null || !days.Any()) return "";
        // Берем первые 3 буквы дня недели (Mon, Tue...)
        var shortDays = days.Select(d => d.Length > 3 ? d.Substring(0, 3) : d);
        return string.Join(", ", shortDays);
    }
}